/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { agentsList } from "../../funcs/agentsList.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  limit: z.number().optional(),
  startingAfter: z.string().optional(),
  endingBefore: z.string().optional(),
};

export const tool$agentsList: ToolDefinition<typeof args> = {
  name: "agents-list",
  description: `List agents

Retrieves a comprehensive list of agents configured in your workspace. Supports pagination for large datasets and returns agents sorted by creation date (newest first). Each agent in the response includes its complete configuration: model settings with fallback options, instructions, tools, knowledge bases, memory stores, and execution parameters. Use pagination parameters to efficiently navigate through large collections of agents.`,
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await agentsList(
      client,
      args.limit,
      args.startingAfter,
      args.endingBefore,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
