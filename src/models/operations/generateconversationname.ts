/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

export type GenerateConversationNameRequestBody = {
  /**
   * Conversation context used to generate a meaningful display name. Typically the first user message or a conversation summary.
   */
  context: string;
};

export type GenerateConversationNameRequest = {
  /**
   * The unique identifier of the conversation to generate a name for
   */
  conversationId: string;
  requestBody: GenerateConversationNameRequestBody;
};

/**
 * Resource type discriminator.
 */
export const GenerateConversationNameKind = {
  Conversation: "conversation",
} as const;
/**
 * Resource type discriminator.
 */
export type GenerateConversationNameKind = ClosedEnum<
  typeof GenerateConversationNameKind
>;

/**
 * Additional conversation metadata.
 */
export type GenerateConversationNameMetadata = {
  /**
   * When `true`, indicates the conversation title is being auto-generated.
   */
  generatingTitle?: boolean | undefined;
  /**
   * Parent entity identifier (e.g., agent or deployment). Set to `null` for standalone conversations.
   */
  entityId?: string | null | undefined;
  /**
   * Model identifier for standalone conversations in `provider/model_id` format. Set to `null` for entity-bound conversations.
   */
  model?: string | null | undefined;
};

/**
 * Conversation name successfully generated and updated. Returns the complete updated conversation object.
 */
export type GenerateConversationNameResponseBody = {
  /**
   * Unique conversation identifier with `conv_` prefix.
   */
  id: string;
  /**
   * Resource type discriminator.
   */
  kind: GenerateConversationNameKind;
  /**
   * Human-readable name for the conversation. Maximum 100 characters.
   */
  displayName: string;
  /**
   * Unix timestamp in milliseconds when the conversation was created.
   */
  createdAt: number;
  /**
   * Unix timestamp in milliseconds when the conversation was last modified.
   */
  updatedAt: number;
  /**
   * Identifier of the user or system that created the conversation.
   */
  createdById?: string | undefined;
  /**
   * Identifier of the user or system that last modified the conversation.
   */
  updatedById?: string | undefined;
  /**
   * Additional conversation metadata.
   */
  metadata?: GenerateConversationNameMetadata | undefined;
};

/** @internal */
export type GenerateConversationNameRequestBody$Outbound = {
  context: string;
};

/** @internal */
export const GenerateConversationNameRequestBody$outboundSchema: z.ZodType<
  GenerateConversationNameRequestBody$Outbound,
  z.ZodTypeDef,
  GenerateConversationNameRequestBody
> = z.object({
  context: z.string(),
});

export function generateConversationNameRequestBodyToJSON(
  generateConversationNameRequestBody: GenerateConversationNameRequestBody,
): string {
  return JSON.stringify(
    GenerateConversationNameRequestBody$outboundSchema.parse(
      generateConversationNameRequestBody,
    ),
  );
}

/** @internal */
export type GenerateConversationNameRequest$Outbound = {
  conversation_id: string;
  RequestBody: GenerateConversationNameRequestBody$Outbound;
};

/** @internal */
export const GenerateConversationNameRequest$outboundSchema: z.ZodType<
  GenerateConversationNameRequest$Outbound,
  z.ZodTypeDef,
  GenerateConversationNameRequest
> = z.object({
  conversationId: z.string(),
  requestBody: z.lazy(() => GenerateConversationNameRequestBody$outboundSchema),
}).transform((v) => {
  return remap$(v, {
    conversationId: "conversation_id",
    requestBody: "RequestBody",
  });
});

export function generateConversationNameRequestToJSON(
  generateConversationNameRequest: GenerateConversationNameRequest,
): string {
  return JSON.stringify(
    GenerateConversationNameRequest$outboundSchema.parse(
      generateConversationNameRequest,
    ),
  );
}

/** @internal */
export const GenerateConversationNameKind$inboundSchema: z.ZodNativeEnum<
  typeof GenerateConversationNameKind
> = z.nativeEnum(GenerateConversationNameKind);

/** @internal */
export const GenerateConversationNameMetadata$inboundSchema: z.ZodType<
  GenerateConversationNameMetadata,
  z.ZodTypeDef,
  unknown
> = z.object({
  generatingTitle: z.boolean().optional(),
  entityId: z.nullable(z.string()).optional(),
  model: z.nullable(z.string()).optional(),
});

export function generateConversationNameMetadataFromJSON(
  jsonString: string,
): SafeParseResult<GenerateConversationNameMetadata, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => GenerateConversationNameMetadata$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'GenerateConversationNameMetadata' from JSON`,
  );
}

/** @internal */
export const GenerateConversationNameResponseBody$inboundSchema: z.ZodType<
  GenerateConversationNameResponseBody,
  z.ZodTypeDef,
  unknown
> = z.object({
  _id: z.string().default("conv_01khzq5h9j25wq14bc5hg62ym8"),
  kind: GenerateConversationNameKind$inboundSchema,
  displayName: z.string(),
  createdAt: z.number(),
  updatedAt: z.number(),
  createdById: z.string().optional(),
  updatedById: z.string().optional(),
  metadata: z.lazy(() => GenerateConversationNameMetadata$inboundSchema)
    .optional(),
}).transform((v) => {
  return remap$(v, {
    "_id": "id",
  });
});

export function generateConversationNameResponseBodyFromJSON(
  jsonString: string,
): SafeParseResult<GenerateConversationNameResponseBody, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) =>
      GenerateConversationNameResponseBody$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'GenerateConversationNameResponseBody' from JSON`,
  );
}
