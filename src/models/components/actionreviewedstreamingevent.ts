/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

export const ActionReviewedStreamingEventType = {
  EventAgentsActionReviewed: "event.agents.action_reviewed",
} as const;
export type ActionReviewedStreamingEventType = ClosedEnum<
  typeof ActionReviewedStreamingEventType
>;

export const Review = {
  Approved: "approved",
  Rejected: "rejected",
} as const;
export type Review = ClosedEnum<typeof Review>;

export type ActionReviewedStreamingEventData = {
  agentId: string;
  actionId: string;
  agentToolCallId: string;
  review: Review;
  mockOutput?: { [k: string]: any } | undefined;
  reviewSource?: string | undefined;
  reviewedById?: string | undefined;
  workflowRunId: string;
};

/**
 * Emitted after a tool action has been reviewed. Contains the review decision (approved/rejected), optional mock output for rejected actions, and reviewer information.
 */
export type ActionReviewedStreamingEvent = {
  type: ActionReviewedStreamingEventType;
  /**
   * ISO timestamp of the event
   */
  timestamp: string;
  data: ActionReviewedStreamingEventData;
};

/** @internal */
export const ActionReviewedStreamingEventType$inboundSchema: z.ZodNativeEnum<
  typeof ActionReviewedStreamingEventType
> = z.nativeEnum(ActionReviewedStreamingEventType);
/** @internal */
export const ActionReviewedStreamingEventType$outboundSchema: z.ZodNativeEnum<
  typeof ActionReviewedStreamingEventType
> = ActionReviewedStreamingEventType$inboundSchema;

/** @internal */
export const Review$inboundSchema: z.ZodNativeEnum<typeof Review> = z
  .nativeEnum(Review);
/** @internal */
export const Review$outboundSchema: z.ZodNativeEnum<typeof Review> =
  Review$inboundSchema;

/** @internal */
export const ActionReviewedStreamingEventData$inboundSchema: z.ZodType<
  ActionReviewedStreamingEventData,
  z.ZodTypeDef,
  unknown
> = z.object({
  agent_id: z.string(),
  action_id: z.string(),
  agent_tool_call_id: z.string(),
  review: Review$inboundSchema,
  mock_output: z.record(z.any()).optional(),
  review_source: z.string().optional(),
  reviewed_by_id: z.string().optional(),
  workflowRunId: z.string(),
}).transform((v) => {
  return remap$(v, {
    "agent_id": "agentId",
    "action_id": "actionId",
    "agent_tool_call_id": "agentToolCallId",
    "mock_output": "mockOutput",
    "review_source": "reviewSource",
    "reviewed_by_id": "reviewedById",
  });
});
/** @internal */
export type ActionReviewedStreamingEventData$Outbound = {
  agent_id: string;
  action_id: string;
  agent_tool_call_id: string;
  review: string;
  mock_output?: { [k: string]: any } | undefined;
  review_source?: string | undefined;
  reviewed_by_id?: string | undefined;
  workflowRunId: string;
};

/** @internal */
export const ActionReviewedStreamingEventData$outboundSchema: z.ZodType<
  ActionReviewedStreamingEventData$Outbound,
  z.ZodTypeDef,
  ActionReviewedStreamingEventData
> = z.object({
  agentId: z.string(),
  actionId: z.string(),
  agentToolCallId: z.string(),
  review: Review$outboundSchema,
  mockOutput: z.record(z.any()).optional(),
  reviewSource: z.string().optional(),
  reviewedById: z.string().optional(),
  workflowRunId: z.string(),
}).transform((v) => {
  return remap$(v, {
    agentId: "agent_id",
    actionId: "action_id",
    agentToolCallId: "agent_tool_call_id",
    mockOutput: "mock_output",
    reviewSource: "review_source",
    reviewedById: "reviewed_by_id",
  });
});

export function actionReviewedStreamingEventDataToJSON(
  actionReviewedStreamingEventData: ActionReviewedStreamingEventData,
): string {
  return JSON.stringify(
    ActionReviewedStreamingEventData$outboundSchema.parse(
      actionReviewedStreamingEventData,
    ),
  );
}
export function actionReviewedStreamingEventDataFromJSON(
  jsonString: string,
): SafeParseResult<ActionReviewedStreamingEventData, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ActionReviewedStreamingEventData$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ActionReviewedStreamingEventData' from JSON`,
  );
}

/** @internal */
export const ActionReviewedStreamingEvent$inboundSchema: z.ZodType<
  ActionReviewedStreamingEvent,
  z.ZodTypeDef,
  unknown
> = z.object({
  type: ActionReviewedStreamingEventType$inboundSchema,
  timestamp: z.string(),
  data: z.lazy(() => ActionReviewedStreamingEventData$inboundSchema),
});
/** @internal */
export type ActionReviewedStreamingEvent$Outbound = {
  type: string;
  timestamp: string;
  data: ActionReviewedStreamingEventData$Outbound;
};

/** @internal */
export const ActionReviewedStreamingEvent$outboundSchema: z.ZodType<
  ActionReviewedStreamingEvent$Outbound,
  z.ZodTypeDef,
  ActionReviewedStreamingEvent
> = z.object({
  type: ActionReviewedStreamingEventType$outboundSchema,
  timestamp: z.string(),
  data: z.lazy(() => ActionReviewedStreamingEventData$outboundSchema),
});

export function actionReviewedStreamingEventToJSON(
  actionReviewedStreamingEvent: ActionReviewedStreamingEvent,
): string {
  return JSON.stringify(
    ActionReviewedStreamingEvent$outboundSchema.parse(
      actionReviewedStreamingEvent,
    ),
  );
}
export function actionReviewedStreamingEventFromJSON(
  jsonString: string,
): SafeParseResult<ActionReviewedStreamingEvent, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ActionReviewedStreamingEvent$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ActionReviewedStreamingEvent' from JSON`,
  );
}
