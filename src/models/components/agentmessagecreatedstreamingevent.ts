/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";
import { DataPart, DataPart$inboundSchema } from "./datapart.js";
import { ErrorPart, ErrorPart$inboundSchema } from "./errorpart.js";
import { FilePart, FilePart$inboundSchema } from "./filepart.js";
import { TextPart, TextPart$inboundSchema } from "./textpart.js";
import { ToolCallPart, ToolCallPart$inboundSchema } from "./toolcallpart.js";
import {
  ToolResultPart,
  ToolResultPart$inboundSchema,
} from "./toolresultpart.js";

export const AgentMessageCreatedStreamingEventRole = {
  User: "user",
  Tool: "tool",
} as const;
export type AgentMessageCreatedStreamingEventRole = ClosedEnum<
  typeof AgentMessageCreatedStreamingEventRole
>;

export type AgentMessageCreatedStreamingEventParts =
  | TextPart
  | ErrorPart
  | DataPart
  | FilePart
  | ToolCallPart
  | ToolResultPart;

export type Message = {
  messageId?: string | undefined;
  role: AgentMessageCreatedStreamingEventRole;
  parts: Array<
    TextPart | ErrorPart | DataPart | FilePart | ToolCallPart | ToolResultPart
  >;
  metadata?: { [k: string]: any } | undefined;
};

export type AgentMessageCreatedStreamingEventData = {
  workflowRunId: string;
  spanId: string;
  parentId: string;
  message: Array<Message>;
};

/**
 * Emitted when a new message is added to the conversation. Contains the message content, workflow run ID, and span context for tracing.
 */
export type AgentMessageCreatedStreamingEvent = {
  type: "event.agents.message-created";
  /**
   * ISO timestamp of the event
   */
  timestamp: string;
  data: AgentMessageCreatedStreamingEventData;
};

/** @internal */
export const AgentMessageCreatedStreamingEventRole$inboundSchema:
  z.ZodNativeEnum<typeof AgentMessageCreatedStreamingEventRole> = z.nativeEnum(
    AgentMessageCreatedStreamingEventRole,
  );

/** @internal */
export const AgentMessageCreatedStreamingEventParts$inboundSchema: z.ZodType<
  AgentMessageCreatedStreamingEventParts,
  z.ZodTypeDef,
  unknown
> = z.union([
  TextPart$inboundSchema,
  ErrorPart$inboundSchema,
  DataPart$inboundSchema,
  FilePart$inboundSchema,
  ToolCallPart$inboundSchema,
  ToolResultPart$inboundSchema,
]);

export function agentMessageCreatedStreamingEventPartsFromJSON(
  jsonString: string,
): SafeParseResult<AgentMessageCreatedStreamingEventParts, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) =>
      AgentMessageCreatedStreamingEventParts$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'AgentMessageCreatedStreamingEventParts' from JSON`,
  );
}

/** @internal */
export const Message$inboundSchema: z.ZodType<Message, z.ZodTypeDef, unknown> =
  z.object({
    messageId: z.string().optional(),
    role: AgentMessageCreatedStreamingEventRole$inboundSchema,
    parts: z.array(
      z.union([
        TextPart$inboundSchema,
        ErrorPart$inboundSchema,
        DataPart$inboundSchema,
        FilePart$inboundSchema,
        ToolCallPart$inboundSchema,
        ToolResultPart$inboundSchema,
      ]),
    ),
    metadata: z.record(z.any()).optional(),
  });

export function messageFromJSON(
  jsonString: string,
): SafeParseResult<Message, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Message$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Message' from JSON`,
  );
}

/** @internal */
export const AgentMessageCreatedStreamingEventData$inboundSchema: z.ZodType<
  AgentMessageCreatedStreamingEventData,
  z.ZodTypeDef,
  unknown
> = z.object({
  workflowRunId: z.string(),
  spanId: z.string(),
  parentId: z.string(),
  message: z.array(z.lazy(() => Message$inboundSchema)),
});

export function agentMessageCreatedStreamingEventDataFromJSON(
  jsonString: string,
): SafeParseResult<AgentMessageCreatedStreamingEventData, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) =>
      AgentMessageCreatedStreamingEventData$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'AgentMessageCreatedStreamingEventData' from JSON`,
  );
}

/** @internal */
export const AgentMessageCreatedStreamingEvent$inboundSchema: z.ZodType<
  AgentMessageCreatedStreamingEvent,
  z.ZodTypeDef,
  unknown
> = z.object({
  type: z.literal("event.agents.message-created"),
  timestamp: z.string(),
  data: z.lazy(() => AgentMessageCreatedStreamingEventData$inboundSchema),
});

export function agentMessageCreatedStreamingEventFromJSON(
  jsonString: string,
): SafeParseResult<AgentMessageCreatedStreamingEvent, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => AgentMessageCreatedStreamingEvent$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'AgentMessageCreatedStreamingEvent' from JSON`,
  );
}
