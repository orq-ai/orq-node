/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { agentsCreate } from "../funcs/agentsCreate.js";
import { agentsDelete } from "../funcs/agentsDelete.js";
import { agentsInvoke } from "../funcs/agentsInvoke.js";
import { agentsList } from "../funcs/agentsList.js";
import { agentsRetrieve } from "../funcs/agentsRetrieve.js";
import { agentsRun } from "../funcs/agentsRun.js";
import { agentsStream } from "../funcs/agentsStream.js";
import { agentsStreamRun } from "../funcs/agentsStreamRun.js";
import { agentsUpdate } from "../funcs/agentsUpdate.js";
import { EventStream } from "../lib/event-streams.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";
import { Responses } from "./responses.js";

export class Agents extends ClientSDK {
  private _responses?: Responses;
  get responses(): Responses {
    return (this._responses ??= new Responses(this._options));
  }

  /**
   * Create agent
   *
   * @remarks
   * Creates a new agent with the specified configuration, including model selection, instructions, tools, and knowledge bases. Agents are intelligent assistants that can execute tasks, interact with tools, and maintain context through memory stores. The agent can be configured with a primary model and optional fallback models for automatic failover, custom instructions for behavior control, and various settings to control execution limits and tool usage.
   */
  async create(
    request: operations.CreateAgentRequestRequestBody,
    options?: RequestOptions,
  ): Promise<operations.CreateAgentRequestResponseBody> {
    return unwrapAsync(agentsCreate(
      this,
      request,
      options,
    ));
  }

  /**
   * List agents
   *
   * @remarks
   * Retrieves a comprehensive list of agents configured in your workspace. Supports pagination for large datasets and returns agents sorted by creation date (newest first). Each agent in the response includes its complete configuration: model settings with fallback options, instructions, tools, knowledge bases, memory stores, and execution parameters. Use pagination parameters to efficiently navigate through large collections of agents.
   */
  async list(
    limit?: number | undefined,
    startingAfter?: string | undefined,
    endingBefore?: string | undefined,
    options?: RequestOptions,
  ): Promise<operations.ListAgentsResponseBody> {
    return unwrapAsync(agentsList(
      this,
      limit,
      startingAfter,
      endingBefore,
      options,
    ));
  }

  /**
   * Delete agent
   *
   * @remarks
   * Permanently removes an agent from the workspace. This operation is irreversible and will delete all associated configuration including model assignments, tools, knowledge bases, memory stores, and cached data. Active agent sessions will be terminated, and the agent key will become available for reuse.
   */
  async delete(
    agentKey: string,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(agentsDelete(
      this,
      agentKey,
      options,
    ));
  }

  /**
   * Retrieve agent
   *
   * @remarks
   * Retrieves detailed information about a specific agent identified by its unique key or identifier. Returns the complete agent manifest including configuration settings, model assignments (primary and fallback), tools, knowledge bases, memory stores, instructions, and execution parameters. Use this endpoint to fetch the current state and configuration of an individual agent.
   */
  async retrieve(
    agentKey: string,
    options?: RequestOptions,
  ): Promise<operations.RetrieveAgentRequestResponseBody> {
    return unwrapAsync(agentsRetrieve(
      this,
      agentKey,
      options,
    ));
  }

  /**
   * Update agent
   *
   * @remarks
   * Modifies an existing agent's configuration with partial updates. Supports updating any aspect of the agent including model assignments (primary and fallback), instructions, tools, knowledge bases, memory stores, and execution parameters. Only the fields provided in the request body will be updated; all other fields remain unchanged. Changes take effect immediately for new agent invocations.
   */
  async update(
    requestBody: operations.UpdateAgentUpdateAgentRequest,
    agentKey: string,
    options?: RequestOptions,
  ): Promise<operations.UpdateAgentResponseBody> {
    return unwrapAsync(agentsUpdate(
      this,
      requestBody,
      agentKey,
      options,
    ));
  }

  /**
   * Execute an agent task
   *
   * @remarks
   * Invokes an agent to perform a task with the provided input message. The agent will process the request using its configured model and tools, maintaining context through memory stores if configured. Supports automatic model fallback on primary model failure, tool execution, knowledge base retrieval, and continuation of previous conversations. Returns a task response that can be used to track execution status and retrieve results.
   *
   * @deprecated method: This will be removed in a future release, please migrate away from it as soon as possible.
   */
  async invoke(
    key: string,
    requestBody?: operations.InvokeAgentRequestBody | undefined,
    options?: RequestOptions,
  ): Promise<operations.InvokeAgentA2ATaskResponse> {
    return unwrapAsync(agentsInvoke(
      this,
      key,
      requestBody,
      options,
    ));
  }

  /**
   * Run an agent with configuration
   *
   * @remarks
   * Executes an agent using inline configuration or references an existing agent. Supports dynamic agent creation where the system automatically manages agent versioning - reusing existing agents with matching configurations or creating new versions when configurations differ. Ideal for programmatic agent execution with flexible configuration management. The agent processes messages in A2A format with support for memory context, tool execution, and automatic model fallback on failure.
   *
   * @deprecated method: This will be removed in a future release, please migrate away from it as soon as possible.
   */
  async run(
    request: operations.RunAgentRequestBody,
    options?: RequestOptions,
  ): Promise<operations.RunAgentA2ATaskResponse> {
    return unwrapAsync(agentsRun(
      this,
      request,
      options,
    ));
  }

  /**
   * Run agent with streaming response
   *
   * @remarks
   * Dynamically configures and executes an agent while streaming the interaction in real-time via Server-Sent Events (SSE). Intelligently manages agent versioning by reusing existing agents with matching configurations or creating new versions when configurations differ. Combines the flexibility of inline configuration with real-time streaming, making it ideal for dynamic agent interactions with live feedback. The stream provides continuous updates including message chunks, tool executions, and status changes until completion or timeout.
   *
   * @deprecated method: This will be removed in a future release, please migrate away from it as soon as possible.
   */
  async streamRun(
    request: operations.StreamRunAgentRequestBody,
    options?: RequestOptions,
  ): Promise<EventStream<operations.StreamRunAgentResponseBody>> {
    return unwrapAsync(agentsStreamRun(
      this,
      request,
      options,
    ));
  }

  /**
   * Stream agent execution in real-time
   *
   * @remarks
   * Executes an agent and streams the interaction in real-time using Server-Sent Events (SSE). Provides live updates as the agent processes the request, including message chunks, tool calls, and execution status. Perfect for building responsive chat interfaces and monitoring agent progress. The stream continues until the agent completes its task, encounters an error, or reaches the configured timeout (default 30 minutes, configurable 1-3600 seconds).
   *
   * @deprecated method: This will be removed in a future release, please migrate away from it as soon as possible.
   */
  async stream(
    requestBody: operations.StreamAgentRequestBody,
    key: string,
    options?: RequestOptions,
  ): Promise<EventStream<operations.StreamAgentResponseBody>> {
    return unwrapAsync(agentsStream(
      this,
      requestBody,
      key,
      options,
    ));
  }
}
