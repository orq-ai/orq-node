/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { agentsResponsesCreate } from "../../funcs/agentsResponsesCreate.js";
import * as operations from "../../models/operations/index.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  requestBody: operations.CreateAgentResponseRequestRequestBody$inboundSchema,
  agentKey: z.string(),
};

export const tool$agentsResponsesCreate: ToolDefinition<typeof args> = {
  name: "agents-responses-create",
  description: `Create response

Initiates an agent conversation and returns a complete response. This endpoint manages the full lifecycle of an agent interaction, from receiving the initial message through all processing steps until completion. Supports synchronous execution (waits for completion) and asynchronous execution (returns immediately with task ID). The response includes all messages exchanged, tool calls made, and token usage statistics. Ideal for request-response patterns where you need the complete interaction result.`,
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await agentsResponsesCreate(
      client,
      args.requestBody,
      args.agentKey,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
