/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { agentsUpdate } from "../../funcs/agentsUpdate.js";
import * as operations from "../../models/operations/index.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  requestBody: operations.UpdateAgentUpdateAgentRequest$inboundSchema,
  agentKey: z.string(),
};

export const tool$agentsUpdate: ToolDefinition<typeof args> = {
  name: "agents-update",
  description: `Update agent

Modifies an existing agent's configuration with partial updates. Supports updating any aspect of the agent including model assignments (primary and fallback), instructions, tools, knowledge bases, memory stores, and execution parameters. Only the fields provided in the request body will be updated; all other fields remain unchanged. Changes take effect immediately for new agent invocations.`,
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await agentsUpdate(
      client,
      args.requestBody,
      args.agentKey,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
