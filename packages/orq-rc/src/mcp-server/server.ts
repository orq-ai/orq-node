/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { OrqCore } from "../core.js";
import { SDKOptions } from "../lib/config.js";
import type { ConsoleLogger } from "./console-logger.js";
import { createRegisterPrompt } from "./prompts.js";
import {
  createRegisterResource,
  createRegisterResourceTemplate,
} from "./resources.js";
import { MCPScope } from "./scopes.js";
import { createRegisterTool } from "./tools.js";
import { tool$agentsCreate } from "./tools/agentsCreate.js";
import { tool$agentsDelete } from "./tools/agentsDelete.js";
import { tool$agentsInvoke } from "./tools/agentsInvoke.js";
import { tool$agentsList } from "./tools/agentsList.js";
import { tool$agentsResponsesCreate } from "./tools/agentsResponsesCreate.js";
import { tool$agentsRetrieve } from "./tools/agentsRetrieve.js";
import { tool$agentsRun } from "./tools/agentsRun.js";
import { tool$agentsStream } from "./tools/agentsStream.js";
import { tool$agentsStreamRun } from "./tools/agentsStreamRun.js";
import { tool$agentsUpdate } from "./tools/agentsUpdate.js";
import { tool$chunkingParse } from "./tools/chunkingParse.js";
import { tool$contactsCreate } from "./tools/contactsCreate.js";
import { tool$contactsDelete } from "./tools/contactsDelete.js";
import { tool$contactsList } from "./tools/contactsList.js";
import { tool$contactsRetrieve } from "./tools/contactsRetrieve.js";
import { tool$contactsUpdate } from "./tools/contactsUpdate.js";
import { tool$conversationsCreate } from "./tools/conversationsCreate.js";
import { tool$conversationsCreateConversationResponse } from "./tools/conversationsCreateConversationResponse.js";
import { tool$conversationsDelete } from "./tools/conversationsDelete.js";
import { tool$conversationsGenerateName } from "./tools/conversationsGenerateName.js";
import { tool$conversationsList } from "./tools/conversationsList.js";
import { tool$conversationsRetrieve } from "./tools/conversationsRetrieve.js";
import { tool$conversationsUpdate } from "./tools/conversationsUpdate.js";
import { tool$datasetsClear } from "./tools/datasetsClear.js";
import { tool$datasetsCreate } from "./tools/datasetsCreate.js";
import { tool$datasetsCreateDatapoint } from "./tools/datasetsCreateDatapoint.js";
import { tool$datasetsDelete } from "./tools/datasetsDelete.js";
import { tool$datasetsDeleteDatapoint } from "./tools/datasetsDeleteDatapoint.js";
import { tool$datasetsList } from "./tools/datasetsList.js";
import { tool$datasetsListDatapoints } from "./tools/datasetsListDatapoints.js";
import { tool$datasetsRetrieve } from "./tools/datasetsRetrieve.js";
import { tool$datasetsRetrieveDatapoint } from "./tools/datasetsRetrieveDatapoint.js";
import { tool$datasetsUpdate } from "./tools/datasetsUpdate.js";
import { tool$datasetsUpdateDatapoint } from "./tools/datasetsUpdateDatapoint.js";
import { tool$deploymentsGetConfig } from "./tools/deploymentsGetConfig.js";
import { tool$deploymentsInvoke } from "./tools/deploymentsInvoke.js";
import { tool$deploymentsList } from "./tools/deploymentsList.js";
import { tool$deploymentsMetricsCreate } from "./tools/deploymentsMetricsCreate.js";
import { tool$deploymentsStream } from "./tools/deploymentsStream.js";
import { tool$evalsAll } from "./tools/evalsAll.js";
import { tool$evalsCreate } from "./tools/evalsCreate.js";
import { tool$evalsDelete } from "./tools/evalsDelete.js";
import { tool$evalsInvoke } from "./tools/evalsInvoke.js";
import { tool$evalsUpdate } from "./tools/evalsUpdate.js";
import { tool$evaluatorsGetV2EvaluatorsIdVersions } from "./tools/evaluatorsGetV2EvaluatorsIdVersions.js";
import { tool$feedbackCreate } from "./tools/feedbackCreate.js";
import { tool$filesCreate } from "./tools/filesCreate.js";
import { tool$filesDelete } from "./tools/filesDelete.js";
import { tool$filesGet } from "./tools/filesGet.js";
import { tool$filesList } from "./tools/filesList.js";
import { tool$identitiesCreate } from "./tools/identitiesCreate.js";
import { tool$identitiesDelete } from "./tools/identitiesDelete.js";
import { tool$identitiesList } from "./tools/identitiesList.js";
import { tool$identitiesRetrieve } from "./tools/identitiesRetrieve.js";
import { tool$identitiesUpdate } from "./tools/identitiesUpdate.js";
import { tool$knowledgeCreate } from "./tools/knowledgeCreate.js";
import { tool$knowledgeCreateChunks } from "./tools/knowledgeCreateChunks.js";
import { tool$knowledgeCreateDatasource } from "./tools/knowledgeCreateDatasource.js";
import { tool$knowledgeDelete } from "./tools/knowledgeDelete.js";
import { tool$knowledgeDeleteChunk } from "./tools/knowledgeDeleteChunk.js";
import { tool$knowledgeDeleteChunks } from "./tools/knowledgeDeleteChunks.js";
import { tool$knowledgeDeleteDatasource } from "./tools/knowledgeDeleteDatasource.js";
import { tool$knowledgeGetChunksCount } from "./tools/knowledgeGetChunksCount.js";
import { tool$knowledgeList } from "./tools/knowledgeList.js";
import { tool$knowledgeListChunks } from "./tools/knowledgeListChunks.js";
import { tool$knowledgeListChunksPaginated } from "./tools/knowledgeListChunksPaginated.js";
import { tool$knowledgeListDatasources } from "./tools/knowledgeListDatasources.js";
import { tool$knowledgeRetrieve } from "./tools/knowledgeRetrieve.js";
import { tool$knowledgeRetrieveChunk } from "./tools/knowledgeRetrieveChunk.js";
import { tool$knowledgeRetrieveDatasource } from "./tools/knowledgeRetrieveDatasource.js";
import { tool$knowledgeSearch } from "./tools/knowledgeSearch.js";
import { tool$knowledgeUpdate } from "./tools/knowledgeUpdate.js";
import { tool$knowledgeUpdateChunk } from "./tools/knowledgeUpdateChunk.js";
import { tool$knowledgeUpdateDatasource } from "./tools/knowledgeUpdateDatasource.js";
import { tool$memoryStoresCreate } from "./tools/memoryStoresCreate.js";
import { tool$memoryStoresCreateDocument } from "./tools/memoryStoresCreateDocument.js";
import { tool$memoryStoresCreateMemory } from "./tools/memoryStoresCreateMemory.js";
import { tool$memoryStoresDelete } from "./tools/memoryStoresDelete.js";
import { tool$memoryStoresDeleteDocument } from "./tools/memoryStoresDeleteDocument.js";
import { tool$memoryStoresDeleteMemory } from "./tools/memoryStoresDeleteMemory.js";
import { tool$memoryStoresList } from "./tools/memoryStoresList.js";
import { tool$memoryStoresListDocuments } from "./tools/memoryStoresListDocuments.js";
import { tool$memoryStoresListMemories } from "./tools/memoryStoresListMemories.js";
import { tool$memoryStoresRetrieve } from "./tools/memoryStoresRetrieve.js";
import { tool$memoryStoresRetrieveDocument } from "./tools/memoryStoresRetrieveDocument.js";
import { tool$memoryStoresRetrieveMemory } from "./tools/memoryStoresRetrieveMemory.js";
import { tool$memoryStoresUpdate } from "./tools/memoryStoresUpdate.js";
import { tool$memoryStoresUpdateDocument } from "./tools/memoryStoresUpdateDocument.js";
import { tool$memoryStoresUpdateMemory } from "./tools/memoryStoresUpdateMemory.js";
import { tool$modelsList } from "./tools/modelsList.js";
import { tool$promptsCreate } from "./tools/promptsCreate.js";
import { tool$promptsDelete } from "./tools/promptsDelete.js";
import { tool$promptsGetVersion } from "./tools/promptsGetVersion.js";
import { tool$promptsList } from "./tools/promptsList.js";
import { tool$promptsListVersions } from "./tools/promptsListVersions.js";
import { tool$promptsRetrieve } from "./tools/promptsRetrieve.js";
import { tool$promptsUpdate } from "./tools/promptsUpdate.js";
import { tool$remoteconfigsRetrieve } from "./tools/remoteconfigsRetrieve.js";
import { tool$routerChatCompletions } from "./tools/routerChatCompletions.js";
import { tool$routerImagesGenerate } from "./tools/routerImagesGenerate.js";
import { tool$toolsCreate } from "./tools/toolsCreate.js";
import { tool$toolsDelete } from "./tools/toolsDelete.js";
import { tool$toolsGetV2ToolsToolIdVersions } from "./tools/toolsGetV2ToolsToolIdVersions.js";
import { tool$toolsGetV2ToolsToolIdVersionsVersionId } from "./tools/toolsGetV2ToolsToolIdVersionsVersionId.js";
import { tool$toolsList } from "./tools/toolsList.js";
import { tool$toolsRetrieve } from "./tools/toolsRetrieve.js";
import { tool$toolsUpdate } from "./tools/toolsUpdate.js";

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  serverURL?: string | undefined;
  apiKey?: SDKOptions["apiKey"] | undefined;
  contactId?: SDKOptions["contactId"] | undefined;
  environment?: SDKOptions["environment"] | undefined;
  serverIdx?: SDKOptions["serverIdx"] | undefined;
}) {
  const server = new McpServer({
    name: "Orq",
    version: "4.2.0-rc.50",
  });

  const client = new OrqCore({
    apiKey: deps.apiKey,
    contactId: deps.contactId,
    environment: deps.environment,
    serverURL: deps.serverURL,
    serverIdx: deps.serverIdx,
  });

  const scopes = new Set(deps.scopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(
    deps.logger,
    server,
    client,
    scopes,
    allowedTools,
  );
  const resource = createRegisterResource(deps.logger, server, client, scopes);
  const resourceTemplate = createRegisterResourceTemplate(
    deps.logger,
    server,
    client,
    scopes,
  );
  const prompt = createRegisterPrompt(deps.logger, server, client, scopes);
  const register = { tool, resource, resourceTemplate, prompt };
  void register; // suppress unused warnings

  tool(tool$contactsCreate);
  tool(tool$contactsList);
  tool(tool$contactsRetrieve);
  tool(tool$contactsUpdate);
  tool(tool$contactsDelete);
  tool(tool$feedbackCreate);
  tool(tool$evalsAll);
  tool(tool$evalsCreate);
  tool(tool$evalsUpdate);
  tool(tool$evalsDelete);
  tool(tool$evalsInvoke);
  tool(tool$evaluatorsGetV2EvaluatorsIdVersions);
  tool(tool$identitiesList);
  tool(tool$identitiesCreate);
  tool(tool$identitiesRetrieve);
  tool(tool$identitiesUpdate);
  tool(tool$identitiesDelete);
  tool(tool$deploymentsInvoke);
  tool(tool$deploymentsList);
  tool(tool$deploymentsGetConfig);
  tool(tool$deploymentsStream);
  tool(tool$agentsCreate);
  tool(tool$agentsDelete);
  tool(tool$agentsRetrieve);
  tool(tool$agentsUpdate);
  tool(tool$agentsInvoke);
  tool(tool$agentsList);
  tool(tool$agentsRun);
  tool(tool$agentsStreamRun);
  tool(tool$agentsStream);
  tool(tool$conversationsList);
  tool(tool$conversationsCreate);
  tool(tool$conversationsGenerateName);
  tool(tool$conversationsRetrieve);
  tool(tool$conversationsUpdate);
  tool(tool$conversationsDelete);
  tool(tool$conversationsCreateConversationResponse);
  tool(tool$filesCreate);
  tool(tool$filesList);
  tool(tool$filesGet);
  tool(tool$filesDelete);
  tool(tool$promptsList);
  tool(tool$promptsCreate);
  tool(tool$promptsRetrieve);
  tool(tool$promptsUpdate);
  tool(tool$promptsDelete);
  tool(tool$promptsListVersions);
  tool(tool$promptsGetVersion);
  tool(tool$remoteconfigsRetrieve);
  tool(tool$modelsList);
  tool(tool$toolsList);
  tool(tool$toolsCreate);
  tool(tool$toolsUpdate);
  tool(tool$toolsDelete);
  tool(tool$toolsRetrieve);
  tool(tool$toolsGetV2ToolsToolIdVersions);
  tool(tool$toolsGetV2ToolsToolIdVersionsVersionId);
  tool(tool$knowledgeList);
  tool(tool$knowledgeCreate);
  tool(tool$knowledgeRetrieve);
  tool(tool$knowledgeUpdate);
  tool(tool$knowledgeDelete);
  tool(tool$knowledgeSearch);
  tool(tool$knowledgeListDatasources);
  tool(tool$knowledgeCreateDatasource);
  tool(tool$knowledgeRetrieveDatasource);
  tool(tool$knowledgeDeleteDatasource);
  tool(tool$knowledgeUpdateDatasource);
  tool(tool$knowledgeCreateChunks);
  tool(tool$knowledgeListChunks);
  tool(tool$knowledgeDeleteChunks);
  tool(tool$knowledgeListChunksPaginated);
  tool(tool$knowledgeGetChunksCount);
  tool(tool$knowledgeUpdateChunk);
  tool(tool$knowledgeDeleteChunk);
  tool(tool$knowledgeRetrieveChunk);
  tool(tool$chunkingParse);
  tool(tool$memoryStoresList);
  tool(tool$memoryStoresCreate);
  tool(tool$memoryStoresRetrieve);
  tool(tool$memoryStoresUpdate);
  tool(tool$memoryStoresDelete);
  tool(tool$memoryStoresListMemories);
  tool(tool$memoryStoresCreateMemory);
  tool(tool$memoryStoresRetrieveMemory);
  tool(tool$memoryStoresUpdateMemory);
  tool(tool$memoryStoresDeleteMemory);
  tool(tool$memoryStoresListDocuments);
  tool(tool$memoryStoresCreateDocument);
  tool(tool$memoryStoresRetrieveDocument);
  tool(tool$memoryStoresUpdateDocument);
  tool(tool$memoryStoresDeleteDocument);
  tool(tool$datasetsList);
  tool(tool$datasetsCreate);
  tool(tool$datasetsRetrieve);
  tool(tool$datasetsUpdate);
  tool(tool$datasetsDelete);
  tool(tool$datasetsListDatapoints);
  tool(tool$datasetsCreateDatapoint);
  tool(tool$datasetsRetrieveDatapoint);
  tool(tool$datasetsUpdateDatapoint);
  tool(tool$datasetsDeleteDatapoint);
  tool(tool$datasetsClear);
  tool(tool$routerChatCompletions);
  tool(tool$routerImagesGenerate);
  tool(tool$deploymentsMetricsCreate);
  tool(tool$agentsResponsesCreate);

  return server;
}
