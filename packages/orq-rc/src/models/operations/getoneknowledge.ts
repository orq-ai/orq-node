/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

export type GetOneKnowledgeRequest = {
  /**
   * Unique identifier of the knowledge base
   */
  knowledgeId: string;
};

export const GetOneKnowledgeResponseBodyKnowledgeType = {
  External: "external",
} as const;
export type GetOneKnowledgeResponseBodyKnowledgeType = ClosedEnum<
  typeof GetOneKnowledgeResponseBodyKnowledgeType
>;

/**
 * The rerank configuration for the knowledge base. In case the model is provided it will be used to enhance the search precision.
 */
export type GetOneKnowledgeResponseBodyKnowledgeRerankConfig = {
  /**
   * The number of results to return by the reranking model
   */
  topK: number;
  /**
   * The threshold value used to filter the rerank results, only documents with a relevance score greater than the threshold will be returned
   */
  rerankThreshold: number;
  /**
   * The rerank model to use for the knowledge base.
   */
  rerankModel: string;
};

/**
 * The Agentic RAG configuration for the knowledge base. If `null` is provided, Agentic RAG will be disabled.
 */
export type GetOneKnowledgeResponseBodyKnowledgeAgenticRagConfig = {
  /**
   * The model to use for the Agentic RAG
   */
  model: string;
};

/**
 * The retrieval settings for the knowledge base.
 */
export type GetOneKnowledgeResponseBodyKnowledgeRetrievalSettings = {
  /**
   * The number of results to return from the search.
   */
  topK: number;
  /**
   * The threshold value used to filter the search results, only documents with a relevance score greater than the threshold will be returned
   */
  threshold: number;
  /**
   * The rerank configuration for the knowledge base. In case the model is provided it will be used to enhance the search precision.
   */
  rerankConfig?:
    | GetOneKnowledgeResponseBodyKnowledgeRerankConfig
    | null
    | undefined;
  /**
   * The Agentic RAG configuration for the knowledge base. If `null` is provided, Agentic RAG will be disabled.
   */
  agenticRagConfig?:
    | GetOneKnowledgeResponseBodyKnowledgeAgenticRagConfig
    | null
    | undefined;
};

export type GetOneKnowledgeResponseBodyExternalConfig = {
  /**
   * The name of the external knowledge base.
   */
  name: string;
  /**
   * The API URL of the external knowledge base.
   */
  apiUrl: string;
};

export type GetOneKnowledgeResponseBody2 = {
  /**
   * The unique identifier of the knowledge base.
   */
  id: string;
  /**
   * The creation date of the knowledge base.
   */
  created: string;
  /**
   * The description of the knowledge base.
   */
  description?: string | undefined;
  /**
   * The unique key of the knowledge base.
   */
  key: string;
  /**
   * The project/domain ID of the knowledge base.
   */
  domainId: string;
  /**
   * Entity storage path in the format: `project/folder/subfolder/...`
   *
   * @remarks
   *
   * The first element identifies the project, followed by nested folders (auto-created as needed).
   *
   * With project-based API keys, the first element is treated as a folder name, as the project is predetermined by the API key.
   */
  path?: string | undefined;
  createdById?: string | null | undefined;
  updatedById?: string | null | undefined;
  /**
   * The last update date of the knowledge base.
   */
  updated: string;
  type: GetOneKnowledgeResponseBodyKnowledgeType;
  /**
   * The retrieval settings for the knowledge base.
   */
  retrievalSettings?:
    | GetOneKnowledgeResponseBodyKnowledgeRetrievalSettings
    | undefined;
  externalConfig: GetOneKnowledgeResponseBodyExternalConfig;
};

export const GetOneKnowledgeResponseBodyType = {
  Internal: "internal",
} as const;
export type GetOneKnowledgeResponseBodyType = ClosedEnum<
  typeof GetOneKnowledgeResponseBodyType
>;

/**
 * The retrieval type to use for the knowledge base. If not provided, Hybrid Search will be used as a default query strategy.
 */
export const GetOneKnowledgeResponseBodyRetrievalType = {
  VectorSearch: "vector_search",
  KeywordSearch: "keyword_search",
  HybridSearch: "hybrid_search",
} as const;
/**
 * The retrieval type to use for the knowledge base. If not provided, Hybrid Search will be used as a default query strategy.
 */
export type GetOneKnowledgeResponseBodyRetrievalType = ClosedEnum<
  typeof GetOneKnowledgeResponseBodyRetrievalType
>;

/**
 * The rerank configuration for the knowledge base. In case the model is provided it will be used to enhance the search precision.
 */
export type GetOneKnowledgeResponseBodyRerankConfig = {
  /**
   * The number of results to return by the reranking model
   */
  topK: number;
  /**
   * The threshold value used to filter the rerank results, only documents with a relevance score greater than the threshold will be returned
   */
  rerankThreshold: number;
  /**
   * The rerank model to use for the knowledge base.
   */
  rerankModel: string;
};

/**
 * The Agentic RAG configuration for the knowledge base. If `null` is provided, Agentic RAG will be disabled.
 */
export type GetOneKnowledgeResponseBodyAgenticRagConfig = {
  /**
   * The model to use for the Agentic RAG
   */
  model: string;
};

/**
 * The retrieval settings for the knowledge base. If not provider, Hybrid Search will be used as a default query strategy.
 */
export type GetOneKnowledgeResponseBodyRetrievalSettings = {
  /**
   * The retrieval type to use for the knowledge base. If not provided, Hybrid Search will be used as a default query strategy.
   */
  retrievalType: GetOneKnowledgeResponseBodyRetrievalType;
  /**
   * The number of results to return from the search.
   */
  topK: number;
  /**
   * The threshold value used to filter the search results, only documents with a relevance score greater than the threshold will be returned
   */
  threshold: number;
  /**
   * The rerank configuration for the knowledge base. In case the model is provided it will be used to enhance the search precision.
   */
  rerankConfig?: GetOneKnowledgeResponseBodyRerankConfig | null | undefined;
  /**
   * The Agentic RAG configuration for the knowledge base. If `null` is provided, Agentic RAG will be disabled.
   */
  agenticRagConfig?:
    | GetOneKnowledgeResponseBodyAgenticRagConfig
    | null
    | undefined;
};

export type GetOneKnowledgeResponseBody1 = {
  /**
   * The unique identifier of the knowledge base.
   */
  id: string;
  /**
   * The creation date of the knowledge base.
   */
  created: string;
  /**
   * The description of the knowledge base.
   */
  description?: string | undefined;
  /**
   * The unique key of the knowledge base.
   */
  key: string;
  /**
   * The project/domain ID of the knowledge base.
   */
  domainId: string;
  /**
   * Entity storage path in the format: `project/folder/subfolder/...`
   *
   * @remarks
   *
   * The first element identifies the project, followed by nested folders (auto-created as needed).
   *
   * With project-based API keys, the first element is treated as a folder name, as the project is predetermined by the API key.
   */
  path?: string | undefined;
  createdById?: string | null | undefined;
  updatedById?: string | null | undefined;
  /**
   * The last update date of the knowledge base.
   */
  updated: string;
  type: GetOneKnowledgeResponseBodyType;
  /**
   * The retrieval settings for the knowledge base. If not provider, Hybrid Search will be used as a default query strategy.
   */
  retrievalSettings?: GetOneKnowledgeResponseBodyRetrievalSettings | undefined;
  /**
   * The embeddings model used for the knowledge base.
   */
  model: string;
};

/**
 * Knowledge base retrieved
 */
export type GetOneKnowledgeResponseBody =
  | GetOneKnowledgeResponseBody1
  | GetOneKnowledgeResponseBody2;

/** @internal */
export type GetOneKnowledgeRequest$Outbound = {
  knowledge_id: string;
};

/** @internal */
export const GetOneKnowledgeRequest$outboundSchema: z.ZodType<
  GetOneKnowledgeRequest$Outbound,
  z.ZodTypeDef,
  GetOneKnowledgeRequest
> = z.object({
  knowledgeId: z.string(),
}).transform((v) => {
  return remap$(v, {
    knowledgeId: "knowledge_id",
  });
});

export function getOneKnowledgeRequestToJSON(
  getOneKnowledgeRequest: GetOneKnowledgeRequest,
): string {
  return JSON.stringify(
    GetOneKnowledgeRequest$outboundSchema.parse(getOneKnowledgeRequest),
  );
}

/** @internal */
export const GetOneKnowledgeResponseBodyKnowledgeType$inboundSchema:
  z.ZodNativeEnum<typeof GetOneKnowledgeResponseBodyKnowledgeType> = z
    .nativeEnum(GetOneKnowledgeResponseBodyKnowledgeType);

/** @internal */
export const GetOneKnowledgeResponseBodyKnowledgeRerankConfig$inboundSchema:
  z.ZodType<
    GetOneKnowledgeResponseBodyKnowledgeRerankConfig,
    z.ZodTypeDef,
    unknown
  > = z.object({
    top_k: z.number().int().default(5),
    rerank_threshold: z.number().default(0.5),
    rerank_model: z.string(),
  }).transform((v) => {
    return remap$(v, {
      "top_k": "topK",
      "rerank_threshold": "rerankThreshold",
      "rerank_model": "rerankModel",
    });
  });

export function getOneKnowledgeResponseBodyKnowledgeRerankConfigFromJSON(
  jsonString: string,
): SafeParseResult<
  GetOneKnowledgeResponseBodyKnowledgeRerankConfig,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      GetOneKnowledgeResponseBodyKnowledgeRerankConfig$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'GetOneKnowledgeResponseBodyKnowledgeRerankConfig' from JSON`,
  );
}

/** @internal */
export const GetOneKnowledgeResponseBodyKnowledgeAgenticRagConfig$inboundSchema:
  z.ZodType<
    GetOneKnowledgeResponseBodyKnowledgeAgenticRagConfig,
    z.ZodTypeDef,
    unknown
  > = z.object({
    model: z.string(),
  });

export function getOneKnowledgeResponseBodyKnowledgeAgenticRagConfigFromJSON(
  jsonString: string,
): SafeParseResult<
  GetOneKnowledgeResponseBodyKnowledgeAgenticRagConfig,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      GetOneKnowledgeResponseBodyKnowledgeAgenticRagConfig$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'GetOneKnowledgeResponseBodyKnowledgeAgenticRagConfig' from JSON`,
  );
}

/** @internal */
export const GetOneKnowledgeResponseBodyKnowledgeRetrievalSettings$inboundSchema:
  z.ZodType<
    GetOneKnowledgeResponseBodyKnowledgeRetrievalSettings,
    z.ZodTypeDef,
    unknown
  > = z.object({
    top_k: z.number().int().default(5),
    threshold: z.number().default(0),
    rerank_config: z.nullable(
      z.lazy(() =>
        GetOneKnowledgeResponseBodyKnowledgeRerankConfig$inboundSchema
      ),
    ).optional(),
    agentic_rag_config: z.nullable(
      z.lazy(() =>
        GetOneKnowledgeResponseBodyKnowledgeAgenticRagConfig$inboundSchema
      ),
    ).optional(),
  }).transform((v) => {
    return remap$(v, {
      "top_k": "topK",
      "rerank_config": "rerankConfig",
      "agentic_rag_config": "agenticRagConfig",
    });
  });

export function getOneKnowledgeResponseBodyKnowledgeRetrievalSettingsFromJSON(
  jsonString: string,
): SafeParseResult<
  GetOneKnowledgeResponseBodyKnowledgeRetrievalSettings,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      GetOneKnowledgeResponseBodyKnowledgeRetrievalSettings$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'GetOneKnowledgeResponseBodyKnowledgeRetrievalSettings' from JSON`,
  );
}

/** @internal */
export const GetOneKnowledgeResponseBodyExternalConfig$inboundSchema: z.ZodType<
  GetOneKnowledgeResponseBodyExternalConfig,
  z.ZodTypeDef,
  unknown
> = z.object({
  name: z.string(),
  api_url: z.string(),
}).transform((v) => {
  return remap$(v, {
    "api_url": "apiUrl",
  });
});

export function getOneKnowledgeResponseBodyExternalConfigFromJSON(
  jsonString: string,
): SafeParseResult<
  GetOneKnowledgeResponseBodyExternalConfig,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      GetOneKnowledgeResponseBodyExternalConfig$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'GetOneKnowledgeResponseBodyExternalConfig' from JSON`,
  );
}

/** @internal */
export const GetOneKnowledgeResponseBody2$inboundSchema: z.ZodType<
  GetOneKnowledgeResponseBody2,
  z.ZodTypeDef,
  unknown
> = z.object({
  _id: z.string(),
  created: z.string(),
  description: z.string().optional(),
  key: z.string(),
  domain_id: z.string(),
  path: z.string().optional(),
  created_by_id: z.nullable(z.string()).optional(),
  updated_by_id: z.nullable(z.string()).optional(),
  updated: z.string(),
  type: GetOneKnowledgeResponseBodyKnowledgeType$inboundSchema.default(
    "external",
  ),
  retrieval_settings: z.lazy(() =>
    GetOneKnowledgeResponseBodyKnowledgeRetrievalSettings$inboundSchema
  ).optional(),
  external_config: z.lazy(() =>
    GetOneKnowledgeResponseBodyExternalConfig$inboundSchema
  ),
}).transform((v) => {
  return remap$(v, {
    "_id": "id",
    "domain_id": "domainId",
    "created_by_id": "createdById",
    "updated_by_id": "updatedById",
    "retrieval_settings": "retrievalSettings",
    "external_config": "externalConfig",
  });
});

export function getOneKnowledgeResponseBody2FromJSON(
  jsonString: string,
): SafeParseResult<GetOneKnowledgeResponseBody2, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => GetOneKnowledgeResponseBody2$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'GetOneKnowledgeResponseBody2' from JSON`,
  );
}

/** @internal */
export const GetOneKnowledgeResponseBodyType$inboundSchema: z.ZodNativeEnum<
  typeof GetOneKnowledgeResponseBodyType
> = z.nativeEnum(GetOneKnowledgeResponseBodyType);

/** @internal */
export const GetOneKnowledgeResponseBodyRetrievalType$inboundSchema:
  z.ZodNativeEnum<typeof GetOneKnowledgeResponseBodyRetrievalType> = z
    .nativeEnum(GetOneKnowledgeResponseBodyRetrievalType);

/** @internal */
export const GetOneKnowledgeResponseBodyRerankConfig$inboundSchema: z.ZodType<
  GetOneKnowledgeResponseBodyRerankConfig,
  z.ZodTypeDef,
  unknown
> = z.object({
  top_k: z.number().int().default(5),
  rerank_threshold: z.number().default(0.5),
  rerank_model: z.string(),
}).transform((v) => {
  return remap$(v, {
    "top_k": "topK",
    "rerank_threshold": "rerankThreshold",
    "rerank_model": "rerankModel",
  });
});

export function getOneKnowledgeResponseBodyRerankConfigFromJSON(
  jsonString: string,
): SafeParseResult<
  GetOneKnowledgeResponseBodyRerankConfig,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      GetOneKnowledgeResponseBodyRerankConfig$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'GetOneKnowledgeResponseBodyRerankConfig' from JSON`,
  );
}

/** @internal */
export const GetOneKnowledgeResponseBodyAgenticRagConfig$inboundSchema:
  z.ZodType<
    GetOneKnowledgeResponseBodyAgenticRagConfig,
    z.ZodTypeDef,
    unknown
  > = z.object({
    model: z.string(),
  });

export function getOneKnowledgeResponseBodyAgenticRagConfigFromJSON(
  jsonString: string,
): SafeParseResult<
  GetOneKnowledgeResponseBodyAgenticRagConfig,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      GetOneKnowledgeResponseBodyAgenticRagConfig$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'GetOneKnowledgeResponseBodyAgenticRagConfig' from JSON`,
  );
}

/** @internal */
export const GetOneKnowledgeResponseBodyRetrievalSettings$inboundSchema:
  z.ZodType<
    GetOneKnowledgeResponseBodyRetrievalSettings,
    z.ZodTypeDef,
    unknown
  > = z.object({
    retrieval_type: GetOneKnowledgeResponseBodyRetrievalType$inboundSchema
      .default("hybrid_search"),
    top_k: z.number().int().default(5),
    threshold: z.number().default(0),
    rerank_config: z.nullable(
      z.lazy(() => GetOneKnowledgeResponseBodyRerankConfig$inboundSchema),
    ).optional(),
    agentic_rag_config: z.nullable(
      z.lazy(() => GetOneKnowledgeResponseBodyAgenticRagConfig$inboundSchema),
    ).optional(),
  }).transform((v) => {
    return remap$(v, {
      "retrieval_type": "retrievalType",
      "top_k": "topK",
      "rerank_config": "rerankConfig",
      "agentic_rag_config": "agenticRagConfig",
    });
  });

export function getOneKnowledgeResponseBodyRetrievalSettingsFromJSON(
  jsonString: string,
): SafeParseResult<
  GetOneKnowledgeResponseBodyRetrievalSettings,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      GetOneKnowledgeResponseBodyRetrievalSettings$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'GetOneKnowledgeResponseBodyRetrievalSettings' from JSON`,
  );
}

/** @internal */
export const GetOneKnowledgeResponseBody1$inboundSchema: z.ZodType<
  GetOneKnowledgeResponseBody1,
  z.ZodTypeDef,
  unknown
> = z.object({
  _id: z.string(),
  created: z.string(),
  description: z.string().optional(),
  key: z.string(),
  domain_id: z.string(),
  path: z.string().optional(),
  created_by_id: z.nullable(z.string()).optional(),
  updated_by_id: z.nullable(z.string()).optional(),
  updated: z.string(),
  type: GetOneKnowledgeResponseBodyType$inboundSchema.default("internal"),
  retrieval_settings: z.lazy(() =>
    GetOneKnowledgeResponseBodyRetrievalSettings$inboundSchema
  ).optional(),
  model: z.string(),
}).transform((v) => {
  return remap$(v, {
    "_id": "id",
    "domain_id": "domainId",
    "created_by_id": "createdById",
    "updated_by_id": "updatedById",
    "retrieval_settings": "retrievalSettings",
  });
});

export function getOneKnowledgeResponseBody1FromJSON(
  jsonString: string,
): SafeParseResult<GetOneKnowledgeResponseBody1, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => GetOneKnowledgeResponseBody1$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'GetOneKnowledgeResponseBody1' from JSON`,
  );
}

/** @internal */
export const GetOneKnowledgeResponseBody$inboundSchema: z.ZodType<
  GetOneKnowledgeResponseBody,
  z.ZodTypeDef,
  unknown
> = z.union([
  z.lazy(() => GetOneKnowledgeResponseBody1$inboundSchema),
  z.lazy(() => GetOneKnowledgeResponseBody2$inboundSchema),
]);

export function getOneKnowledgeResponseBodyFromJSON(
  jsonString: string,
): SafeParseResult<GetOneKnowledgeResponseBody, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => GetOneKnowledgeResponseBody$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'GetOneKnowledgeResponseBody' from JSON`,
  );
}
