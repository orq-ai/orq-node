/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

export type ErrorT = {
  message: string;
  stack?: string | undefined;
};

/**
 * Orquesta product
 */
export const ToolExecutionFailedStreamingEventProduct = {
  Remoteconfigs: "remoteconfigs",
  Deployments: "deployments",
  Experiments: "experiments",
  Playgrounds: "playgrounds",
  Spreadsheets: "spreadsheets",
  SpreadsheetRun: "spreadsheet_run",
  LlmEvaluator: "llm_evaluator",
  Knowledge: "knowledge",
  Router: "router",
  Workflows: "workflows",
  ExternalEvents: "external_events",
  Agents: "agents",
  MemoryStores: "memory-stores",
  Generic: "generic",
  Evaluators: "evaluators",
  Otel: "otel",
} as const;
/**
 * Orquesta product
 */
export type ToolExecutionFailedStreamingEventProduct = ClosedEnum<
  typeof ToolExecutionFailedStreamingEventProduct
>;

export type ToolExecutionFailedStreamingEventMemory = {
  entityId: string;
};

export type ToolExecutionFailedStreamingEventToolExecutionContext = {
  actionId: string;
  agentToolCallId: string;
  workspaceId: string;
  agentManifestId: string;
  agentExecutionId: string;
  /**
   * Orquesta product
   */
  product: ToolExecutionFailedStreamingEventProduct;
  memory?: ToolExecutionFailedStreamingEventMemory | undefined;
  parentId?: string | undefined;
};

export type ToolExecutionFailedStreamingEventData = {
  error: ErrorT;
  actionType: string;
  toolExecutionContext: ToolExecutionFailedStreamingEventToolExecutionContext;
  responseId?: string | undefined;
  workflowRunId: string;
  stream?: boolean | undefined;
};

/**
 * Emitted when a tool execution fails. Contains the error details, action type, and execution context.
 */
export type ToolExecutionFailedStreamingEvent = {
  type: "event.workflow_events.tool_execution_failed";
  /**
   * ISO timestamp of the event
   */
  timestamp: string;
  data: ToolExecutionFailedStreamingEventData;
};

/** @internal */
export const ErrorT$inboundSchema: z.ZodType<ErrorT, z.ZodTypeDef, unknown> = z
  .object({
    message: z.string(),
    stack: z.string().optional(),
  });
/** @internal */
export type ErrorT$Outbound = {
  message: string;
  stack?: string | undefined;
};

/** @internal */
export const ErrorT$outboundSchema: z.ZodType<
  ErrorT$Outbound,
  z.ZodTypeDef,
  ErrorT
> = z.object({
  message: z.string(),
  stack: z.string().optional(),
});

export function errorToJSON(errorT: ErrorT): string {
  return JSON.stringify(ErrorT$outboundSchema.parse(errorT));
}
export function errorFromJSON(
  jsonString: string,
): SafeParseResult<ErrorT, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ErrorT$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ErrorT' from JSON`,
  );
}

/** @internal */
export const ToolExecutionFailedStreamingEventProduct$inboundSchema:
  z.ZodNativeEnum<typeof ToolExecutionFailedStreamingEventProduct> = z
    .nativeEnum(ToolExecutionFailedStreamingEventProduct);
/** @internal */
export const ToolExecutionFailedStreamingEventProduct$outboundSchema:
  z.ZodNativeEnum<typeof ToolExecutionFailedStreamingEventProduct> =
    ToolExecutionFailedStreamingEventProduct$inboundSchema;

/** @internal */
export const ToolExecutionFailedStreamingEventMemory$inboundSchema: z.ZodType<
  ToolExecutionFailedStreamingEventMemory,
  z.ZodTypeDef,
  unknown
> = z.object({
  entity_id: z.string(),
}).transform((v) => {
  return remap$(v, {
    "entity_id": "entityId",
  });
});
/** @internal */
export type ToolExecutionFailedStreamingEventMemory$Outbound = {
  entity_id: string;
};

/** @internal */
export const ToolExecutionFailedStreamingEventMemory$outboundSchema: z.ZodType<
  ToolExecutionFailedStreamingEventMemory$Outbound,
  z.ZodTypeDef,
  ToolExecutionFailedStreamingEventMemory
> = z.object({
  entityId: z.string(),
}).transform((v) => {
  return remap$(v, {
    entityId: "entity_id",
  });
});

export function toolExecutionFailedStreamingEventMemoryToJSON(
  toolExecutionFailedStreamingEventMemory:
    ToolExecutionFailedStreamingEventMemory,
): string {
  return JSON.stringify(
    ToolExecutionFailedStreamingEventMemory$outboundSchema.parse(
      toolExecutionFailedStreamingEventMemory,
    ),
  );
}
export function toolExecutionFailedStreamingEventMemoryFromJSON(
  jsonString: string,
): SafeParseResult<
  ToolExecutionFailedStreamingEventMemory,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      ToolExecutionFailedStreamingEventMemory$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'ToolExecutionFailedStreamingEventMemory' from JSON`,
  );
}

/** @internal */
export const ToolExecutionFailedStreamingEventToolExecutionContext$inboundSchema:
  z.ZodType<
    ToolExecutionFailedStreamingEventToolExecutionContext,
    z.ZodTypeDef,
    unknown
  > = z.object({
    action_id: z.string(),
    agent_tool_call_id: z.string(),
    workspace_id: z.string(),
    agent_manifest_id: z.string(),
    agent_execution_id: z.string(),
    product: ToolExecutionFailedStreamingEventProduct$inboundSchema,
    memory: z.lazy(() => ToolExecutionFailedStreamingEventMemory$inboundSchema)
      .optional(),
    parent_id: z.string().optional(),
  }).transform((v) => {
    return remap$(v, {
      "action_id": "actionId",
      "agent_tool_call_id": "agentToolCallId",
      "workspace_id": "workspaceId",
      "agent_manifest_id": "agentManifestId",
      "agent_execution_id": "agentExecutionId",
      "parent_id": "parentId",
    });
  });
/** @internal */
export type ToolExecutionFailedStreamingEventToolExecutionContext$Outbound = {
  action_id: string;
  agent_tool_call_id: string;
  workspace_id: string;
  agent_manifest_id: string;
  agent_execution_id: string;
  product: string;
  memory?: ToolExecutionFailedStreamingEventMemory$Outbound | undefined;
  parent_id?: string | undefined;
};

/** @internal */
export const ToolExecutionFailedStreamingEventToolExecutionContext$outboundSchema:
  z.ZodType<
    ToolExecutionFailedStreamingEventToolExecutionContext$Outbound,
    z.ZodTypeDef,
    ToolExecutionFailedStreamingEventToolExecutionContext
  > = z.object({
    actionId: z.string(),
    agentToolCallId: z.string(),
    workspaceId: z.string(),
    agentManifestId: z.string(),
    agentExecutionId: z.string(),
    product: ToolExecutionFailedStreamingEventProduct$outboundSchema,
    memory: z.lazy(() => ToolExecutionFailedStreamingEventMemory$outboundSchema)
      .optional(),
    parentId: z.string().optional(),
  }).transform((v) => {
    return remap$(v, {
      actionId: "action_id",
      agentToolCallId: "agent_tool_call_id",
      workspaceId: "workspace_id",
      agentManifestId: "agent_manifest_id",
      agentExecutionId: "agent_execution_id",
      parentId: "parent_id",
    });
  });

export function toolExecutionFailedStreamingEventToolExecutionContextToJSON(
  toolExecutionFailedStreamingEventToolExecutionContext:
    ToolExecutionFailedStreamingEventToolExecutionContext,
): string {
  return JSON.stringify(
    ToolExecutionFailedStreamingEventToolExecutionContext$outboundSchema.parse(
      toolExecutionFailedStreamingEventToolExecutionContext,
    ),
  );
}
export function toolExecutionFailedStreamingEventToolExecutionContextFromJSON(
  jsonString: string,
): SafeParseResult<
  ToolExecutionFailedStreamingEventToolExecutionContext,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      ToolExecutionFailedStreamingEventToolExecutionContext$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'ToolExecutionFailedStreamingEventToolExecutionContext' from JSON`,
  );
}

/** @internal */
export const ToolExecutionFailedStreamingEventData$inboundSchema: z.ZodType<
  ToolExecutionFailedStreamingEventData,
  z.ZodTypeDef,
  unknown
> = z.object({
  error: z.lazy(() => ErrorT$inboundSchema),
  action_type: z.string(),
  tool_execution_context: z.lazy(() =>
    ToolExecutionFailedStreamingEventToolExecutionContext$inboundSchema
  ),
  responseId: z.string().optional(),
  workflowRunId: z.string(),
  stream: z.boolean().optional(),
}).transform((v) => {
  return remap$(v, {
    "action_type": "actionType",
    "tool_execution_context": "toolExecutionContext",
  });
});
/** @internal */
export type ToolExecutionFailedStreamingEventData$Outbound = {
  error: ErrorT$Outbound;
  action_type: string;
  tool_execution_context:
    ToolExecutionFailedStreamingEventToolExecutionContext$Outbound;
  responseId?: string | undefined;
  workflowRunId: string;
  stream?: boolean | undefined;
};

/** @internal */
export const ToolExecutionFailedStreamingEventData$outboundSchema: z.ZodType<
  ToolExecutionFailedStreamingEventData$Outbound,
  z.ZodTypeDef,
  ToolExecutionFailedStreamingEventData
> = z.object({
  error: z.lazy(() => ErrorT$outboundSchema),
  actionType: z.string(),
  toolExecutionContext: z.lazy(() =>
    ToolExecutionFailedStreamingEventToolExecutionContext$outboundSchema
  ),
  responseId: z.string().optional(),
  workflowRunId: z.string(),
  stream: z.boolean().optional(),
}).transform((v) => {
  return remap$(v, {
    actionType: "action_type",
    toolExecutionContext: "tool_execution_context",
  });
});

export function toolExecutionFailedStreamingEventDataToJSON(
  toolExecutionFailedStreamingEventData: ToolExecutionFailedStreamingEventData,
): string {
  return JSON.stringify(
    ToolExecutionFailedStreamingEventData$outboundSchema.parse(
      toolExecutionFailedStreamingEventData,
    ),
  );
}
export function toolExecutionFailedStreamingEventDataFromJSON(
  jsonString: string,
): SafeParseResult<ToolExecutionFailedStreamingEventData, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) =>
      ToolExecutionFailedStreamingEventData$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ToolExecutionFailedStreamingEventData' from JSON`,
  );
}

/** @internal */
export const ToolExecutionFailedStreamingEvent$inboundSchema: z.ZodType<
  ToolExecutionFailedStreamingEvent,
  z.ZodTypeDef,
  unknown
> = z.object({
  type: z.literal("event.workflow_events.tool_execution_failed"),
  timestamp: z.string(),
  data: z.lazy(() => ToolExecutionFailedStreamingEventData$inboundSchema),
});
/** @internal */
export type ToolExecutionFailedStreamingEvent$Outbound = {
  type: "event.workflow_events.tool_execution_failed";
  timestamp: string;
  data: ToolExecutionFailedStreamingEventData$Outbound;
};

/** @internal */
export const ToolExecutionFailedStreamingEvent$outboundSchema: z.ZodType<
  ToolExecutionFailedStreamingEvent$Outbound,
  z.ZodTypeDef,
  ToolExecutionFailedStreamingEvent
> = z.object({
  type: z.literal("event.workflow_events.tool_execution_failed"),
  timestamp: z.string(),
  data: z.lazy(() => ToolExecutionFailedStreamingEventData$outboundSchema),
});

export function toolExecutionFailedStreamingEventToJSON(
  toolExecutionFailedStreamingEvent: ToolExecutionFailedStreamingEvent,
): string {
  return JSON.stringify(
    ToolExecutionFailedStreamingEvent$outboundSchema.parse(
      toolExecutionFailedStreamingEvent,
    ),
  );
}
export function toolExecutionFailedStreamingEventFromJSON(
  jsonString: string,
): SafeParseResult<ToolExecutionFailedStreamingEvent, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ToolExecutionFailedStreamingEvent$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ToolExecutionFailedStreamingEvent' from JSON`,
  );
}
